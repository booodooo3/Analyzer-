<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyzer A | Ultimate Video Search</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        cairo: ['Cairo', 'sans-serif'],
                        roboto: ['Roboto', 'sans-serif'],
                    },
                    colors: {
                        youtube: '#FF0000',
                        dailymotion: '#0066DC',
                        vimeo: '#1AB7EA',
                        dark: {
                            900: '#0f0f0f',
                            800: '#1f1f1f',
                            700: '#2d2d2d'
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f0f0f;
        }
        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .video-card:hover .play-overlay {
            opacity: 1;
        }
        .platform-btn.active {
            background-color: white;
            color: black;
            font-weight: bold;
        }

        /* Directional Logic for Search Bar */
        /* RTL Defaults (Arabic) */
        [dir="rtl"] .search-icon-pos { right: 0; padding-right: 1rem; }
        [dir="rtl"] .search-btn-pos { left: 0; padding-left: 0.5rem; }
        [dir="rtl"] .search-input-pad { padding-right: 3rem; padding-left: 5rem; }
        [dir="rtl"] .search-btn-shape { border-top-left-radius: 9999px; border-bottom-left-radius: 9999px; border-left-width: 1px; }
        
        /* LTR Overrides (English) */
        [dir="ltr"] .search-icon-pos { left: 0; padding-left: 1rem; }
        [dir="ltr"] .search-btn-pos { right: 0; padding-right: 0.5rem; }
        [dir="ltr"] .search-input-pad { padding-left: 3rem; padding-right: 5rem; }
        [dir="ltr"] .search-btn-shape { border-top-right-radius: 9999px; border-bottom-right-radius: 9999px; border-right-width: 1px; }

        body {
            font-family: 'Roboto', sans-serif;
        }
        [dir="rtl"] body {
            font-family: 'Cairo', sans-serif;
        }
    </style>
</head>
<body class="bg-dark-900 text-white min-h-screen flex flex-col transition-all duration-300">

    <!-- Header / Navbar -->
    <header class="sticky top-0 z-50 bg-dark-900/95 backdrop-blur-md border-b border-dark-700 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row items-center justify-between gap-4">
            
            <!-- Logo -->
            <div class="flex items-center gap-2 cursor-pointer" onclick="resetApp()">
                <div class="w-10 h-10 bg-gradient-to-br from-red-600 to-purple-600 rounded-lg flex items-center justify-center text-xl shadow-lg">
                    <i class="fa-solid fa-play text-white"></i>
                </div>
                <h1 class="text-2xl font-bold tracking-wide font-sans">Analyzer <span class="text-red-500">A</span></h1>
            </div>

            <!-- Search Bar -->
            <div class="w-full max-w-2xl relative group">
                <div class="absolute inset-y-0 search-icon-pos flex items-center pointer-events-none">
                    <i class="fa-solid fa-magnifying-glass text-gray-400 group-focus-within:text-white transition-colors"></i>
                </div>
                <input type="text" 
                       id="searchInput" 
                       placeholder="Search for videos..." 
                       class="w-full bg-dark-800 border border-dark-700 text-white text-lg rounded-full py-3 search-input-pad focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 transition-all shadow-inner"
                       onkeypress="handleEnter(event)">
                <button onclick="performSearch()" class="absolute inset-y-0 search-btn-pos py-1">
                    <div id="btnSearchText" class="bg-dark-700 hover:bg-dark-600 text-white px-6 h-full flex items-center transition-colors border-dark-600 search-btn-shape">
                        Search
                    </div>
                </button>
            </div>

            <!-- User Icon & Lang Switch -->
            <div class="flex items-center gap-4">
                <button onclick="toggleLanguage()" class="px-3 py-1 rounded border border-dark-600 text-sm hover:bg-dark-700 text-gray-300 transition flex items-center gap-2">
                    <i class="fa-solid fa-globe"></i>
                    <span id="langBtnText">العربية</span>
                </button>
                <!-- تم حذف أيقونة المستخدم وزر التنبيهات -->
            </div>
        </div>
    </header>

    <!-- Platform Selection Tabs -->
    <div class="bg-dark-800 border-b border-dark-700 py-3 overflow-x-auto">
        <div class="container mx-auto px-4 flex gap-3 whitespace-nowrap" id="platformContainer">
            <button onclick="selectPlatform('all')" class="platform-btn active px-6 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition text-sm flex items-center gap-2" id="btn-all">
                <i class="fa-solid fa-layer-group"></i> <span data-key="btnAll">All</span>
            </button>
            <button onclick="selectPlatform('youtube')" class="platform-btn px-6 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition text-sm flex items-center gap-2 text-gray-300" id="btn-youtube">
                <i class="fa-brands fa-youtube text-youtube"></i> <span data-key="btnYoutube">YouTube</span>
            </button>
            <button onclick="selectPlatform('dailymotion')" class="platform-btn px-6 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition text-sm flex items-center gap-2 text-gray-300" id="btn-dailymotion">
                <i class="fa-brands fa-dailymotion text-dailymotion"></i> <span data-key="btnDailymotion">Dailymotion</span>
            </button>
            <button onclick="selectPlatform('vimeo')" class="platform-btn px-6 py-2 rounded-full border border-dark-600 hover:bg-dark-700 transition text-sm flex items-center gap-2 text-gray-300" id="btn-vimeo">
                <i class="fa-brands fa-vimeo text-vimeo"></i> <span data-key="btnVimeo">Vimeo</span>
            </button>
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto px-4 py-8">
        
        <!-- Status Message Area -->
        <div id="statusMessage" class="hidden mb-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg text-blue-200 flex items-center gap-3">
            <i class="fa-solid fa-info-circle text-xl"></i>
            <span id="statusText">Redirecting to search results...</span>
        </div>

        <!-- Featured / Results Label -->
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold flex items-center gap-2">
                <i class="fa-solid fa-fire text-red-500"></i> <span id="sectionTitle">Trending Videos</span>
            </h2>
            <div class="flex gap-2">
                <button class="w-8 h-8 rounded-full bg-dark-700 flex items-center justify-center hover:bg-dark-600 transform ltr:rotate-180 transition-transform"><i class="fa-solid fa-chevron-right"></i></button>
                <button class="w-8 h-8 rounded-full bg-dark-700 flex items-center justify-center hover:bg-dark-600 transform ltr:rotate-180 transition-transform"><i class="fa-solid fa-chevron-left"></i></button>
            </div>
        </div>

        <!-- Video Grid -->
        <div id="videoGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Content will be injected via JS -->
        </div>

        <!-- Empty State (Hidden by default) -->
        <div id="emptyState" class="hidden flex-col items-center justify-center py-20 text-center text-gray-500">
            <i class="fa-solid fa-film text-6xl mb-4 text-dark-700"></i>
            <p class="text-xl" id="emptyTitle">No results to display.</p>
            <p class="text-sm mt-2" id="emptyDesc">Try searching for something else.</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark-800 border-t border-dark-700 py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400 mb-4" id="footerDesc">Designed as a unified search interface for easy content access.</p>
            <div class="flex justify-center gap-6 mb-4">
                <a href="#" class="text-gray-500 hover:text-youtube text-2xl"><i class="fa-brands fa-youtube"></i></a>
                <a href="#" class="text-gray-500 hover:text-dailymotion text-2xl"><i class="fa-brands fa-dailymotion"></i></a>
                <a href="#" class="text-gray-500 hover:text-vimeo text-2xl"><i class="fa-brands fa-vimeo"></i></a>
            </div>
            <p class="text-gray-600 text-sm" id="footerCopyright">&copy; 2025 Analyzer A. All rights reserved.</p>
            
            <!-- Instagram Handle -->
            <a href="https://www.instagram.com/boood0003" target="_blank" class="block mt-2 text-gray-500 hover:text-pink-500 transition-colors text-sm" dir="ltr">
                <i class="fa-brands fa-instagram"></i> @boood0003
            </a>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Configuration & State ---
        let currentLang = 'en'; // Changed default to English
        let currentPlatform = 'all';

        // --- DOM Elements ---
        const searchInput = document.getElementById('searchInput');
        const videoGrid = document.getElementById('videoGrid');
        const sectionTitle = document.getElementById('sectionTitle');
        const statusMessage = document.getElementById('statusMessage');
        const statusText = document.getElementById('statusText');
        const langBtnText = document.getElementById('langBtnText');
        const btnSearchText = document.getElementById('btnSearchText');
        const emptyTitle = document.getElementById('emptyTitle');
        const emptyDesc = document.getElementById('emptyDesc');
        const footerDesc = document.getElementById('footerDesc');
        const footerCopyright = document.getElementById('footerCopyright');

        // --- Translations ---
        const i18n = {
            ar: {
                pageTitle: "Analyzer A | محرك بحث الفيديو الشامل",
                searchPlaceholder: "ابحث عن فيديو (أغاني، تقنية، وثائقيات...)",
                searchButton: "بحث",
                btnAll: "الكل",
                btnYoutube: "يوتيوب",
                btnDailymotion: "ديلي موشن",
                btnVimeo: "فيميو",
                featuredTitle: "الفيديوهات الرائجة",
                statusLoading: "جاري تحويلك لنتائج البحث... إذا لم تفتح النافذة، يرجى السماح بالنوافذ المنبثقة.",
                emptyStateTitle: "لا توجد نتائج لعرضها حالياً.",
                emptyStateDesc: "جرب البحث عن شيء آخر.",
                footerDesc: "تم التصميم كواجهة بحث موحدة لتسهيل الوصول للمحتوى.",
                copyright: "© 2025 Analyzer A. جميع الحقوق محفوظة.",
                alertEnterQuery: "الرجاء إدخال كلمة للبحث",
                confirmMultiOpen: "سيتم فتح البحث عن \"{query}\" في يوتيوب.\n\nهل تريد أيضاً فتح ديلي موشن وفيميو؟",
                resultsFor: "نتائج البحث عن:",
                langBtnLabel: "English"
            },
            en: {
                pageTitle: "Analyzer A | Ultimate Video Search",
                searchPlaceholder: "Search for videos (music, tech, docs...)",
                searchButton: "Search",
                btnAll: "All",
                btnYoutube: "YouTube",
                btnDailymotion: "Dailymotion",
                btnVimeo: "Vimeo",
                featuredTitle: "Trending Videos",
                statusLoading: "Redirecting to search results... Allow popups if window doesn't open.",
                emptyStateTitle: "No results to display.",
                emptyStateDesc: "Try searching for something else.",
                footerDesc: "Designed as a unified search interface for easy content access.",
                copyright: "© 2025 Analyzer A. All rights reserved.",
                alertEnterQuery: "Please enter a search term",
                confirmMultiOpen: "Search for \"{query}\" will open in YouTube.\n\nDo you want to open Dailymotion and Vimeo as well?",
                resultsFor: "Search results for:",
                langBtnLabel: "العربية"
            }
        };

        // --- Mock Data (Bilingual) ---
        const mockVideos = [
            { 
                id: 1,
                title: { ar: "أفضل وجهات السفر لعام 2024", en: "Top Travel Destinations for 2024" },
                views: { ar: "1.2M", en: "1.2M" },
                duration: "12:45", 
                thumbnail: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?q=80&w=600&auto=format&fit=crop", 
                platform: "youtube", 
                channel: { ar: "سافر معي", en: "Travel With Me" }
            },
            { 
                id: 2,
                title: { ar: "مراجعة شاملة لآيفون 15 برو ماكس", en: "iPhone 15 Pro Max Full Review" },
                views: { ar: "850K", en: "850K" },
                duration: "18:20", 
                thumbnail: "https://images.unsplash.com/photo-1696446701796-da61225697cc?q=80&w=600&auto=format&fit=crop", 
                platform: "youtube", 
                channel: { ar: "تيك زون", en: "Tech Zone" }
            },
            { 
                id: 3,
                title: { ar: "ملخص نهائي دوري الأبطال", en: "Champions League Final Highlights" },
                views: { ar: "3.5M", en: "3.5M" },
                duration: "08:15", 
                thumbnail: "https://images.unsplash.com/photo-1431324155629-1a6deb1dec8d?q=80&w=600&auto=format&fit=crop", 
                platform: "dailymotion", 
                channel: { ar: "بي إن سبورت", en: "BeIN Sports" }
            },
            { 
                id: 4,
                title: { ar: "كيف تبدأ البرمجة من الصفر", en: "Start Programming from Scratch" },
                views: { ar: "400K", en: "400K" },
                duration: "45:00", 
                thumbnail: "https://images.unsplash.com/photo-1587620962725-abab7fe55159?q=80&w=600&auto=format&fit=crop", 
                platform: "vimeo", 
                channel: { ar: "أكاديمية الكود", en: "Code Academy" }
            },
            { 
                id: 5,
                title: { ar: "طريقة عمل البيتزا الإيطالية", en: "Authentic Italian Pizza Recipe" },
                views: { ar: "2.1M", en: "2.1M" },
                duration: "10:30", 
                thumbnail: "https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=600&auto=format&fit=crop", 
                platform: "youtube", 
                channel: { ar: "مطبخ منال", en: "Manal's Kitchen" }
            },
            { 
                id: 6,
                title: { ar: "وثائقي: أسرار الكون والفضاء", en: "Documentary: Secrets of the Cosmos" },
                views: { ar: "900K", en: "900K" },
                duration: "1:20:00", 
                thumbnail: "https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?q=80&w=600&auto=format&fit=crop", 
                platform: "dailymotion", 
                channel: { ar: "ناشيونال جيو", en: "Nat Geo" }
            },
            { 
                id: 7,
                title: { ar: "تمرين كامل للجسم في المنزل", en: "Full Body Workout at Home" },
                views: { ar: "560K", en: "560K" },
                duration: "25:00", 
                thumbnail: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?q=80&w=600&auto=format&fit=crop", 
                platform: "youtube", 
                channel: { ar: "فيتنس تايم", en: "Fitness Time" }
            },
            { 
                id: 8,
                title: { ar: "جولة في سيارة المستقبل الكهربائية", en: "Future Electric Car Tour" },
                views: { ar: "1.5M", en: "1.5M" },
                duration: "14:10", 
                thumbnail: "https://images.unsplash.com/photo-1560958089-b8a1929cea89?q=80&w=600&auto=format&fit=crop", 
                platform: "vimeo", 
                channel: { ar: "عالم السيارات", en: "Car World" }
            }
        ];

        // --- Initialization ---
        window.onload = function() {
            renderVideos();
        };

        // --- Core Functions ---

        function toggleLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            applyLanguage();
        }

        function applyLanguage() {
            const t = i18n[currentLang];
            const dir = currentLang === 'ar' ? 'rtl' : 'ltr';

            // 1. Update HTML Attributes
            document.documentElement.lang = currentLang;
            document.documentElement.dir = dir;

            // 2. Update Static Text
            document.title = t.pageTitle;
            searchInput.placeholder = t.searchPlaceholder;
            btnSearchText.innerText = t.searchButton;
            langBtnText.innerText = t.langBtnLabel;
            sectionTitle.innerText = t.featuredTitle;
            statusText.innerText = t.statusLoading;
            emptyTitle.innerText = t.emptyStateTitle;
            emptyDesc.innerText = t.emptyStateDesc;
            footerDesc.innerText = t.footerDesc;
            footerCopyright.innerText = t.copyright;

            // 3. Update Tab Buttons
            document.querySelector('[data-key="btnAll"]').innerText = t.btnAll;
            document.querySelector('[data-key="btnYoutube"]').innerText = t.btnYoutube;
            document.querySelector('[data-key="btnDailymotion"]').innerText = t.btnDailymotion;
            document.querySelector('[data-key="btnVimeo"]').innerText = t.btnVimeo;

            // 4. Update Grid Content
            renderVideos();
        }

        function renderVideos() {
            videoGrid.innerHTML = '';
            
            // Filter videos if needed
            let displayVideos = mockVideos;
            if (currentPlatform !== 'all') {
                displayVideos = mockVideos.filter(v => v.platform === currentPlatform);
            }

            if (displayVideos.length === 0) {
                document.getElementById('emptyState').classList.remove('hidden');
                document.getElementById('emptyState').classList.add('flex');
            } else {
                document.getElementById('emptyState').classList.add('hidden');
                document.getElementById('emptyState').classList.remove('flex');
            }

            const viewsText = currentLang === 'ar' ? 'مشاهدة' : 'views';

            displayVideos.forEach(video => {
                const title = video.title[currentLang];
                const channel = video.channel[currentLang];
                const views = video.views[currentLang];

                const card = document.createElement('div');
                card.className = 'video-card group cursor-pointer';
                card.onclick = () => performSpecificSearch(title, video.platform); 
                
                card.innerHTML = `
                    <div class="relative rounded-xl overflow-hidden aspect-video bg-dark-800 mb-3 shadow-lg group-hover:shadow-red-900/20 transition-all duration-300 group-hover:-translate-y-1">
                        <img src="${video.thumbnail}" alt="${title}" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity">
                        <div class="absolute bottom-2 ${currentLang === 'ar' ? 'right-2' : 'left-2'} bg-black/80 text-white text-xs px-2 py-1 rounded font-mono">
                            ${video.duration}
                        </div>
                        <div class="play-overlay absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 transition-opacity duration-300">
                            <div class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center ${currentLang === 'ar' ? 'pl-1' : 'pr-1'} text-white shadow-lg scale-90 group-hover:scale-100 transition-transform">
                                <i class="fa-solid fa-play"></i>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-3 items-start">
                        <div class="w-9 h-9 rounded-full bg-dark-700 flex items-center justify-center text-sm border border-dark-600">
                           ${getPlatformIcon(video.platform)}
                        </div>
                        <div>
                            <h3 class="font-bold text-white text-sm leading-tight mb-1 group-hover:text-red-500 transition-colors line-clamp-2 text-start">${title}</h3>
                            <p class="text-gray-400 text-xs hover:text-gray-300 transition-colors text-start">${channel}</p>
                            <p class="text-gray-500 text-xs mt-0.5 text-start">${views} ${viewsText} • ${video.platform}</p>
                        </div>
                    </div>
                `;
                videoGrid.appendChild(card);
            });
        }

        function performSearch() {
            const query = searchInput.value.trim();
            const t = i18n[currentLang];

            if (!query) {
                alert(t.alertEnterQuery);
                return;
            }

            statusMessage.classList.remove('hidden');
            sectionTitle.innerText = `${t.resultsFor} ${query}`;
            
            const ytUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;
            const dmUrl = `https://www.dailymotion.com/search/${encodeURIComponent(query)}`;
            const vmUrl = `https://vimeo.com/search?q=${encodeURIComponent(query)}`;

            setTimeout(() => {
                if (currentPlatform === 'youtube') {
                    window.open(ytUrl, '_blank');
                } else if (currentPlatform === 'dailymotion') {
                    window.open(dmUrl, '_blank');
                } else if (currentPlatform === 'vimeo') {
                    window.open(vmUrl, '_blank');
                } else {
                    const msg = t.confirmMultiOpen.replace('{query}', query);
                    const userConfirm = confirm(msg);
                    window.open(ytUrl, '_blank');
                    if (userConfirm) {
                        window.open(dmUrl, '_blank');
                        window.open(vmUrl, '_blank');
                    }
                }
                statusMessage.classList.add('hidden');
            }, 500); 
        }

        function handleEnter(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        function selectPlatform(platform) {
            currentPlatform = platform;
            const buttons = document.querySelectorAll('.platform-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active', 'bg-white', 'text-black', 'font-bold');
                btn.classList.add('text-gray-300');
            });

            const activeBtn = document.getElementById(`btn-${platform}`);
            activeBtn.classList.add('active'); 
            activeBtn.classList.remove('text-gray-300');
            
            renderVideos();
        }

        function getPlatformIcon(platform) {
            switch(platform) {
                case 'youtube': return '<i class="fa-brands fa-youtube text-youtube"></i>';
                case 'dailymotion': return '<i class="fa-brands fa-dailymotion text-dailymotion"></i>';
                case 'vimeo': return '<i class="fa-brands fa-vimeo text-vimeo"></i>';
                default: return '<i class="fa-solid fa-play"></i>';
            }
        }
        
        function performSpecificSearch(title, platform) {
            if (platform === 'youtube') window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(title)}`, '_blank');
            if (platform === 'dailymotion') window.open(`https://www.dailymotion.com/search/${encodeURIComponent(title)}`, '_blank');
            if (platform === 'vimeo') window.open(`https://vimeo.com/search?q=${encodeURIComponent(title)}`, '_blank');
        }

        function resetApp() {
            const t = i18n[currentLang];
            searchInput.value = '';
            sectionTitle.innerText = t.featuredTitle;
            selectPlatform('all');
        }

    </script>
</body>
</html>